class AuthController {
    constructor(authService, userProfileService) {
        this.authService = authService;
        this.userProfileService = userProfileService;
    }

    // 인증 과정
    async authenticate(loginRequestDto) {
        const ssotoken = await this.authService.authenticate(loginRequestDto);
        return ssotoken; // ssotoken을 반환
    }

    // 로그인 및 사용자 프로필 가져오기
    async login(loginRequestDto) {
        const ssotoken = await this.authenticate(loginRequestDto);
        if (!ssotoken) {
            throw new Error("Login failed: User authentication failed");
        }

        const response = await this.userProfileService.getUserProfile(ssotoken);
        return response;
    }
}

export default AuthController;
